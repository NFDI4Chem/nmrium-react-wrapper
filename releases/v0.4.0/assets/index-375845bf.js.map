{"version":3,"file":"index-375845bf.js","sources":["../../../src/events/event.ts","../../../src/hooks/usePreferences.ts","../../../src/utilities/isArrayOfString.ts","../../../src/utilities/getFileNameFromURL.ts","../../../src/hooks/useLoadSpectra.ts","../../../src/hooks/useWhiteList.ts","../../../src/NMRiumWrapper.tsx","../../../src/utilities/loadFilesFromURLs.ts","../../../src/demo/NMRiumWrapperDemo.tsx","../../../src/index.tsx"],"sourcesContent":["import { EventType, EventData } from './types';\n\nconst namespace = 'nmr-wrapper';\n\nfunction trigger<T extends EventType>(type: T, data: EventData<T>) {\n  window.parent.postMessage({ type: `${namespace}:${type}`, data }, '*');\n}\n\nfunction on<T extends EventType>(\n  type: T,\n  dataListener: (data: EventData<T>) => void,\n  options: {\n    eventOptions?: boolean | AddEventListenerOptions;\n    allowedOrigins?: string[];\n  } = {},\n) {\n  const { eventOptions, allowedOrigins = [] } = options;\n\n  async function listener(event: MessageEvent) {\n    const {\n      origin,\n      data: { type: targetType, data },\n    } = event;\n\n    const url = new URL(origin);\n\n    const skipOriginCheck =\n      allowedOrigins.length === 0 || allowedOrigins.includes('*');\n\n    if (!skipOriginCheck && !allowedOrigins.includes(url.origin)) {\n      throw new Error(`Invalid Origin ${origin}`);\n    }\n\n    if (`${namespace}:${type}` === targetType) {\n      dataListener?.(data);\n    }\n  }\n  window.addEventListener(`message`, listener, eventOptions);\n\n  return () => window.removeEventListener(`message`, listener);\n}\n\nexport default { trigger, on };\n","import { WorkspacePreferences } from 'nmr-load-save';\nimport { NMRiumWorkspace } from 'nmrium';\nimport { useLayoutEffect, useState } from 'react';\n\nexport function usePreferences() {\n  const [configuration, setConfiguration] = useState<{\n    preferences: WorkspacePreferences | undefined;\n    workspace: NMRiumWorkspace | undefined;\n  }>({ preferences: undefined, workspace: undefined });\n\n  useLayoutEffect(() => {\n    const { href } = window.location;\n    const parameters = new URL(href).searchParams;\n\n    let preferences: WorkspacePreferences | undefined;\n    let workspace: NMRiumWorkspace | undefined;\n\n    if (parameters.has('workspace')) {\n      workspace = parameters.get('workspace') as NMRiumWorkspace;\n    }\n    if (parameters.has('preferences')) {\n      preferences = JSON.parse(parameters.get('preferences') || '');\n    }\n    setConfiguration({ preferences, workspace });\n  }, []);\n\n  return configuration;\n}\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isArrayOfString(data: any[]) {\n  return data.every((url) => typeof url === 'string');\n}\n","export function getFileNameFromURL(url: string) {\n  return url.substring(url.lastIndexOf('/') + 1);\n}\n","import { useCallback, useMemo, useState } from 'react';\nimport {\n  read,\n  readFromWebSource,\n  NmriumState,\n  CURRENT_EXPORT_VERSION,\n} from 'nmr-load-save';\nimport { fileCollectionFromFiles } from 'filelist-utils';\nimport events from '../events';\nimport { isArrayOfString } from '../utilities/isArrayOfString';\nimport { getFileNameFromURL } from '../utilities/getFileNameFromURL';\n\nasync function loadSpectraFromFiles(files: File[]) {\n  const fileCollection = await fileCollectionFromFiles(files);\n\n  const {\n    nmriumState: { data },\n  } = await read(fileCollection);\n  return data;\n}\n\nasync function loadSpectraFromURLs(urls: string[]) {\n  const entries = urls.map((url) => {\n    const refURL = new URL(url);\n    const name = getFileNameFromURL(url);\n    let path = refURL.pathname;\n    const hasExtension = name && name.indexOf('.') !== -1;\n    if (!hasExtension) {\n      path = `${path}.zip`;\n    }\n    return { relativePath: path, baseURL: refURL.origin };\n  }, []);\n\n  const { data } = await readFromWebSource({ entries });\n  return data;\n}\n\ntype NMRiumData = NmriumState['data'];\n\nexport function useLoadSpectra() {\n  const [data, setData] = useState<NMRiumData>({ spectra: [], molecules: [] });\n  const [isLoading, setLoading] = useState<boolean>(false);\n\n  const load = useCallback(\n    async (options: { urls: string[] } | { files: File[] }) => {\n      setLoading(true);\n      try {\n        if ('urls' in options) {\n          if (isArrayOfString(options.urls)) {\n            const result = await loadSpectraFromURLs(options.urls);\n            setData(result as NMRiumData);\n          } else {\n            throw new Error('The input must be a valid urls array of string[]');\n          }\n        } else if ('files' in options) {\n          const result = await loadSpectraFromFiles(options.files);\n          setData(result as NMRiumData);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      } catch (error: any) {\n        events.trigger('error', error);\n        // eslint-disable-next-line no-console\n        console.log(error);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [],\n  );\n\n  return useMemo(\n    () => ({\n      data: { version: CURRENT_EXPORT_VERSION, data },\n      load,\n      isLoading,\n    }),\n    [data, isLoading, load],\n  );\n}\n","import { useEffect, useState, useTransition } from 'react';\n\nasync function readAllowedOrigins() {\n  return fetch(\n    'https://raw.githubusercontent.com/NFDI4Chem/nmrium-react-wrapper/main/src/allowed-origins.json',\n  ).then((response) => response.json());\n}\n\nexport function useWhiteList() {\n  const [allowedOrigins, setAllowedOrigins] = useState([]);\n  const [isFetchAllowedOriginsPending, startTransition] = useTransition();\n\n  useEffect(() => {\n    startTransition(() => {\n      readAllowedOrigins().then((whitelist) => setAllowedOrigins(whitelist));\n    });\n  }, []);\n\n  return {\n    allowedOrigins,\n    isFetchAllowedOriginsPending,\n  };\n}\n","import NMRium, { NMRiumData, NMRiumRef, OnNMRiumChange } from 'nmrium';\nimport { useEffect, useState, useCallback, CSSProperties, useRef } from 'react';\nimport events from './events';\nimport { usePreferences } from './hooks/usePreferences';\nimport { useLoadSpectra } from './hooks/useLoadSpectra';\nimport { useWhiteList } from './hooks/useWhiteList';\n\nconst styles: Record<'container' | 'loadingContainer', CSSProperties> = {\n  container: {\n    height: '100%',\n    width: '100%',\n  },\n\n  loadingContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    zIndex: 1,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#ffffffc9',\n    fontSize: '1.4em',\n    userSelect: 'none',\n    WebkitUserSelect: 'none',\n  },\n};\n\nexport type { NMRiumData };\n\nexport default function NMRiumWrapper() {\n  const { allowedOrigins, isFetchAllowedOriginsPending } = useWhiteList();\n  const nmriumRef = useRef<NMRiumRef>(null);\n  const [data, setDate] = useState<NMRiumData>();\n  const { workspace, preferences } = usePreferences();\n  const dataChangeHandler = useCallback<OnNMRiumChange>((state, source) => {\n    events.trigger('data-change', { state, source });\n  }, []);\n\n  const { load: loadSpectra, isLoading, data: loadedData } = useLoadSpectra();\n\n  useEffect(() => {\n    if (!isLoading) {\n      setDate(loadedData as unknown as NMRiumData);\n    }\n  }, [isLoading, loadedData]);\n\n  useEffect(() => {\n    const clearActionListener = events.on(\n      'action-request',\n      (request) => {\n        switch (request.type) {\n          case 'exportSpectraViewerAsBlob': {\n            const blob = nmriumRef.current?.getSpectraViewerAsBlob();\n            if (blob) {\n              events.trigger('action-response', {\n                type: request.type,\n                data: blob,\n              });\n            }\n            break;\n          }\n          default: {\n            throw new Error(\n              `ERROR! Property 'type' accept only 'exportViewerAsBlob'.`,\n            );\n          }\n        }\n      },\n      { allowedOrigins },\n    );\n    const clearLoadListener = events.on(\n      'load',\n      (loadData) => {\n        switch (loadData.type) {\n          case 'nmrium':\n            setDate(loadData.data);\n            break;\n          case 'file':\n            loadSpectra({ files: loadData.data });\n            break;\n          case 'url':\n            loadSpectra({ urls: loadData.data });\n            break;\n\n          default: {\n            throw new Error(\n              `ERROR! Property 'type' accept only nmrium, url or file.`,\n            );\n          }\n        }\n      },\n      { allowedOrigins },\n    );\n\n    return () => {\n      clearLoadListener();\n      clearActionListener();\n    };\n  });\n\n  return (\n    <div style={styles.container}>\n      {isLoading ||\n        (isFetchAllowedOriginsPending && (\n          <div style={styles.loadingContainer}>\n            <span>Loading .... </span>\n          </div>\n        ))}\n      <NMRium\n        ref={nmriumRef}\n        data={data}\n        onChange={dataChangeHandler}\n        preferences={preferences}\n        workspace={workspace}\n      />\n    </div>\n  );\n}\n","import { getFileNameFromURL } from './getFileNameFromURL';\n\nexport function loadFilesFromURLs(urls: string[]): Promise<File[]> {\n  const fetches = urls.map((url) =>\n    fetch(url)\n      .then((response) => response.arrayBuffer())\n      .then((data) => {\n        let name = getFileNameFromURL(url);\n        const hasExtension = name && name.indexOf('.') !== -1;\n        if (!hasExtension) {\n          name = `${name}.zip`;\n        }\n        return new File([data], name);\n      }),\n  );\n\n  return Promise.all(fetches);\n}\n","/** @jsxImportSource @emotion/react */\nimport { css } from '@emotion/react';\nimport Button from 'nmrium/lib/component/elements/Button';\nimport { NMRiumData } from 'nmrium';\nimport events from '../events';\nimport NMRiumWrapper from '../NMRiumWrapper';\nimport jsonData from './data/test.json';\nimport { loadFilesFromURLs } from '../utilities/loadFilesFromURLs';\n\nconst styles = {\n  container: css`\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  `,\n  header: css`\n    height: 40px;\n    width: 100%;\n    padding: 5px;\n    display: flex;\n  `,\n};\n\nexport default function NMRiumWrapperDemo() {\n  return (\n    <div css={styles.container}>\n      <div id=\"header\" css={styles.header}>\n        <Button.Done\n          style={{ marginRight: '10px' }}\n          onClick={() => {\n            events.trigger('load', {\n              data: jsonData as NMRiumData,\n              type: 'nmrium',\n            });\n          }}\n        >\n          Test load from json\n        </Button.Done>\n\n        <Button.Done\n          style={{ marginRight: '10px' }}\n          onClick={() => {\n            events.trigger('load', {\n              data: [\n                'https://cheminfo.github.io/nmr-dataset-demo/cytisine/13c.jdx',\n                'https://cheminfo.github.io/nmr-dataset-demo/cytisine/1h.jdx',\n                'https://cheminfo.github.io/bruker-data-test/data/zipped/aspirin-1h.zip',\n                // '../data/13c.zip',\n                // 'https://cloud.uni-jena.de/s/y72GbCX8bJbmpJT/download/10.zip',\n                // 'https://cloud.uni-jena.de/s/jsMed9fmqWZzo6r/download/53.zip',\n              ],\n              type: 'url',\n            });\n          }}\n        >\n          Test Load from URLS\n        </Button.Done>\n\n        <Button.Done\n          style={{ marginRight: '10px' }}\n          onClick={() => {\n            events.trigger('load', {\n              data: [\n                'https://cheminfo.github.io/bruker-data-test/data/zipped/aspirin-1h',\n              ],\n              type: 'url',\n            });\n          }}\n        >\n          Test Load URL without extension\n        </Button.Done>\n        <Button.Done\n          onClick={async () => {\n            const files = await loadFilesFromURLs([\n              '../data/COSY-12.zip',\n              '../data/HMBC-13.zip',\n              '../data/13c.zip',\n            ]);\n            events.trigger('load', {\n              data: files,\n              type: 'file',\n            });\n          }}\n        >\n          Test Load Files\n        </Button.Done>\n      </div>\n\n      <NMRiumWrapper />\n    </div>\n  );\n}\n","import { createRoot } from 'react-dom/client';\nimport { HashRouter as Router, Route, Routes } from 'react-router-dom';\nimport NMRiumWrapper from './NMRiumWrapper';\nimport NMRiumWrapperDemo from './demo/NMRiumWrapperDemo';\n\nconst rootContainer = document.getElementById('root');\n\nif (!rootContainer) {\n  throw new Error('#root element is not exists in the dom');\n}\n\nconst root = createRoot(rootContainer);\n\nfunction RootWrapper() {\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<NMRiumWrapper />} />\n        <Route path=\"/demo\" element={<NMRiumWrapperDemo />} />\n      </Routes>\n    </Router>\n  );\n}\n\nroot.render(<RootWrapper />);\n"],"names":["namespace","trigger","type","data","on","dataListener","options","eventOptions","allowedOrigins","listener","event","origin","targetType","url","usePreferences","configuration","setConfiguration","useState","useLayoutEffect","href","parameters","preferences","workspace","isArrayOfString","getFileNameFromURL","loadSpectraFromFiles","files","fileCollection","fileCollectionFromFiles","read","loadSpectraFromURLs","urls","entries","refURL","name","path","readFromWebSource","useLoadSpectra","setData","isLoading","setLoading","load","useCallback","result","error","events","useMemo","CURRENT_EXPORT_VERSION","readAllowedOrigins","response","useWhiteList","setAllowedOrigins","isFetchAllowedOriginsPending","startTransition","useTransition","useEffect","whitelist","styles","NMRiumWrapper","nmriumRef","useRef","setDate","dataChangeHandler","state","source","loadSpectra","loadedData","clearActionListener","request","blob","_a","clearLoadListener","loadData","jsxs","jsx","NMRium","loadFilesFromURLs","fetches","css","NMRiumWrapperDemo","Button","jsonData","rootContainer","root","createRoot","RootWrapper","Router","Routes","Route"],"mappings":"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"}