var s="text/plain",q="text/html",O=e=>{};function i(e){O(e)}function fe(e){O=e}var R=!0;function ve(){R=!1}function z(){return R}function J(){(console.warn||console.log).apply(console,arguments)}J.bind("[clipboard-polyfill]");var m=typeof window>"u"?void 0:window,K=typeof globalThis>"u"?void 0:globalThis,b,w,h,y=(h=(b=m)==null?void 0:b.Promise)!=null?h:(w=K)==null?void 0:w.Promise;function Q(){if(!y)throw new Error("No `Promise` implementation available for `clipboard-polyfill`. Consider using: https://github.com/lgarron/clipboard-polyfill#flat-file-version-with-promise-included");return y}var T=typeof navigator>"u"?void 0:navigator,a=T==null?void 0:T.clipboard,x,C=(x=a==null?void 0:a.read)==null?void 0:x.bind(a),E,S=(E=a==null?void 0:a.readText)==null?void 0:E.bind(a),D,I=(D=a==null?void 0:a.write)==null?void 0:D.bind(a),P,U=(P=a==null?void 0:a.writeText)==null?void 0:P.bind(a),_,g=(_=m)==null?void 0:_.ClipboardItem,l=Q(),d=m;function W(){return typeof ClipboardEvent>"u"&&typeof(d==null?void 0:d.clipboardData)<"u"&&typeof(d==null?void 0:d.clipboardData.setData)<"u"}function V(e){if(!d.clipboardData)return!1;var r=d.clipboardData.setData("Text",e);return r&&i("writeTextIE worked"),r}function Y(){if(!d.clipboardData)throw new Error("Cannot read IE clipboard Data ");var e=d.clipboardData.getData("Text");if(e==="")throw new Error("Empty clipboard or could not read plain text from clipboard");return e}function Z(e,r,t){i("listener called"),e.success=!0;for(var n in r){var o=r[n],u=t.clipboardData;u.setData(n,o),n===s&&u.getData(n)!==o&&(i("setting text/plain failed"),e.success=!1)}t.preventDefault()}function A(e){var r={success:!1},t=Z.bind(this,r,e);document.addEventListener("copy",t);try{document.execCommand("copy")}finally{document.removeEventListener("copy",t)}return r.success}function k(e,r){M(e);var t=A(r);return F(),t}function $(e){var r=document.createElement("div");r.setAttribute("style","-webkit-user-select: text !important"),r.textContent="temporary element",document.body.appendChild(r);var t=k(r,e);return document.body.removeChild(r),t}function ee(e){i("copyTextUsingDOM");var r=document.createElement("div");r.setAttribute("style","-webkit-user-select: text !important");var t=r;r.attachShadow&&(i("Using shadow DOM."),t=r.attachShadow({mode:"open"}));var n=document.createElement("span");n.innerText=e,t.appendChild(n),document.body.appendChild(r),M(n);var o=document.execCommand("copy");return F(),document.body.removeChild(r),o}function M(e){var r=document.getSelection();if(r){var t=document.createRange();t.selectNodeContents(e),r.removeAllRanges(),r.addRange(t)}}function F(){var e=document.getSelection();e&&e.removeAllRanges()}function j(e){var r=s in e;if(W()){if(!r)throw new Error("No `text/plain` value was specified.");if(V(e[s]))return!0;throw new Error("Copying failed, possibly because the user rejected it.")}return A(e)?(i("regular execCopy worked"),!0):navigator.userAgent.indexOf("Edge")>-1?(i('UA "Edge" => assuming success'),!0):k(document.body,e)?(i("copyUsingTempSelection worked"),!0):$(e)?(i("copyUsingTempElem worked"),!0):ee(e[s])?(i("copyTextUsingDOM worked"),!0):!1}function B(e,r){for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push(r(o))}return l.all(t).then(u=>{for(var c={},p=0;p<e.length;p++)c[e[p]]=u[p];return c})}var re=l.resolve(),te=()=>l.resolve(!0),L=l.resolve(!1);function f(e){return new l((r,t)=>{try{r(e())}catch(n){t(n)}})}function ne(e){var r={};return r[s]=e,r}function ge(e){return U?(i("Using `navigator.clipboard.writeText()`."),U(e).catch(r=>{N(e)})):N(e)}function N(e){return f(()=>l.resolve(oe(e)))}function oe(e){if(!j(ne(e)))throw new Error("writeText() failed")}function ie(){return f(()=>{if(S)return i("Using `navigator.clipboard.readText()`."),S();if(W()){var e=Y();return l.resolve(e)}throw new Error("Read is not supported in your browser.")})}function v(e,r){for(var t=0;t<e.length;t++){var n=e[t];if(n.types.indexOf(r)!==-1)return!0}return!1}function ae(e,r){var t,n=Object.keys(e),o={};for(var u in e){var c=e[u];typeof c=="string"?o[u]=G(u,c):o[u]=c}var p=(t=r==null?void 0:r.presentationStyle)!=null?t:"unspecified";function X(H){return l.resolve(o[H])}return{types:n,presentationStyle:p,getType:X}}var le=ae;function G(e,r){return new Blob([r],{type:e})}function ue(e){return new l((r,t)=>{var n=new FileReader;n.addEventListener("load",()=>{var o=n.result;typeof o=="string"?r(o):t("could not convert blob to string")}),n.readAsText(e)})}function se(e){return B(e.types,function(r){return e.getType(r)}).then(r=>new l((t,n)=>{var o={};e.presentationStyle&&(o.presentationStyle=e.presentationStyle),g?t(new g(r,o)):n("window.ClipboardItem is not defined")}))}function de(e){var r={};return r[s]=G(e,s),new le(r)}function ce(e,r){return e.getType(r).then(t=>ue(t))}function pe(e){return B(e.types,function(r){return ce(e,r)})}function me(e){return f(()=>{if(I&&g){var r=I;return i("Using `navigator.clipboard.write()`."),l.all(e.map(se)).then(t=>r(t).then(te).catch(n=>{if(!v(e,s)&&!v(e,q))throw n;return L}))}return L}).then(r=>{if(r)return re;var t=v(e,s);return z()&&!t&&i("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call suppressWarnings() to suppress this warning."),pe(e[0]).then(n=>{if(!j(n))throw new Error("write() failed")})})}function be(){return f(()=>C?(i("Using `navigator.clipboard.read()`."),C()):ie().then(e=>[de(e)]))}export{le as ClipboardItem,be as read,ie as readText,fe as setDebugLog,ve as suppressWarnings,me as write,ge as writeText};
//# sourceMappingURL=clipboard-polyfill.es6-nOiYH50d.js.map
